drop table ESPECIFICACIONES ;
drop table COMENTARIO ;
 drop table ESPECIFICACIONPRODUCTO;
drop table PRODUCTO;
drop table PROVEEDOR;
drop table ORDENCOMPRA;
drop table IMAGENES;
drop table CLIENTE;
drop table USUARIO;
drop table CATEGORIAESPECIFICACIONPROD;
drop table CATEGORIA;
drop table CLIENTECOMPRAPRODUCTO;


CREATE USER IF NOT EXISTS ADMIN SALT '11387b11ecc7a4a5' HASH 'dbda573a108f2972818bf802e3cd7c36f0ed85b5f4bfbd704bbb59ff3058e206' ADMIN;
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_498950E9_3271_4626_8606_DD1CCB9331C4 START WITH 203 BELONGS_TO_TABLE;
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_FEFDC1A3_E1F6_4354_B4AA_EFD8763DE900 START WITH 33 BELONGS_TO_TABLE;
CREATE SEQUENCE PUBLIC.SYSTEM_SEQUENCE_A404B519_61B0_430D_A25B_FAE73321C1DA START WITH 2270 BELONGS_TO_TABLE;
CREATE CACHED TABLE PUBLIC.PROVEEDOR(
    NICKNAME VARCHAR(255) NOT NULL,
    LINKSITIO VARCHAR(255),
    NOMBRECOMPANIA VARCHAR(255)
);
ALTER TABLE PUBLIC.PROVEEDOR ADD CONSTRAINT PUBLIC.CONSTRAINT_8 PRIMARY KEY(NICKNAME);
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.PROVEEDOR;
CREATE CACHED TABLE PUBLIC.CLIENTE(
    NICKNAME VARCHAR(255) NOT NULL
);
ALTER TABLE PUBLIC.CLIENTE ADD CONSTRAINT PUBLIC.CONSTRAINT_5 PRIMARY KEY(NICKNAME);
-- 7 +/- SELECT COUNT(*) FROM PUBLIC.CLIENTE;
CREATE CACHED TABLE PUBLIC.CATEGORIA(
    NOMBRE VARCHAR(255) NOT NULL,
    PADRE VARCHAR(255)
);
ALTER TABLE PUBLIC.CATEGORIA ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(NOMBRE);
-- 23 +/- SELECT COUNT(*) FROM PUBLIC.CATEGORIA;
CREATE CACHED TABLE PUBLIC.CATEGORIAESPECIFICACIONPROD(
    CAT_NAME VARCHAR(255) NOT NULL,
    ESP_NROREF VARCHAR(255) NOT NULL
);
-- 24 +/- SELECT COUNT(*) FROM PUBLIC.CATEGORIAESPECIFICACIONPROD;
CREATE CACHED TABLE PUBLIC.ORDENCOMPRA(
    NRO_ORDEN BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_498950E9_3271_4626_8606_DD1CCB9331C4) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_498950E9_3271_4626_8606_DD1CCB9331C4,
    FECHA DATE,
    PRECIO DECIMAL
);
ALTER TABLE PUBLIC.ORDENCOMPRA ADD CONSTRAINT PUBLIC.CONSTRAINT_28 PRIMARY KEY(NRO_ORDEN);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.ORDENCOMPRA;
CREATE CACHED TABLE PUBLIC.CLIENTECOMPRAPRODUCTO(
    CLIENTE_ID VARCHAR(255) NOT NULL,
    PRODUCTO_ID BIGINT NOT NULL,
    PRECIO DOUBLE,
    ORDEN_ID BIGINT NOT NULL
);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CLIENTECOMPRAPRODUCTO;
CREATE CACHED TABLE PUBLIC.IMAGENES(
    PATH VARCHAR(255) NOT NULL,
    PARENTID VARCHAR(255) NOT NULL
);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.IMAGENES;
CREATE CACHED TABLE PUBLIC.ESPECIFICACIONPRODUCTO(
    NROREFERENCIA VARCHAR(255) NOT NULL,
    NOMBRE VARCHAR(255),
    DESCRIPCION VARCHAR(255),
    PRECIO DOUBLE,
    PROVEEDOR_ID VARCHAR(255),
    ESPECIFICACION VARCHAR(255)
);
ALTER TABLE PUBLIC.ESPECIFICACIONPRODUCTO ADD CONSTRAINT PUBLIC.CONSTRAINT_9 PRIMARY KEY(NROREFERENCIA);
-- 14 +/- SELECT COUNT(*) FROM PUBLIC.ESPECIFICACIONPRODUCTO;
CREATE CACHED TABLE PUBLIC.ESPECIFICACIONES(
    ESPPRID VARCHAR(255) NOT NULL,
    NOMBRE VARCHAR(50) NOT NULL,
    VALOR VARCHAR(255) NOT NULL
);
ALTER TABLE PUBLIC.ESPECIFICACIONES ADD CONSTRAINT PUBLIC.CONSTRAINT_6 PRIMARY KEY(ESPPRID, NOMBRE, VALOR);
-- 41 +/- SELECT COUNT(*) FROM PUBLIC.ESPECIFICACIONES;
CREATE CACHED TABLE PUBLIC.USUARIO(
    NICKNAME VARCHAR(255) NOT NULL,
    NOMBRE VARCHAR(255),
    APELLIDO VARCHAR(255),
    EMAIL VARCHAR(255),
    FECHANACIMIENTO DATE,
    IMAGEN VARCHAR(255),
    DTYPE VARCHAR(31),
    PASSWORD VARCHAR(128)
);
ALTER TABLE PUBLIC.USUARIO ADD CONSTRAINT PUBLIC.CONSTRAINT_2 PRIMARY KEY(NICKNAME);
-- 13 +/- SELECT COUNT(*) FROM PUBLIC.USUARIO;
CREATE CACHED TABLE PUBLIC.PRODUCTO(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_A404B519_61B0_430D_A25B_FAE73321C1DA) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_A404B519_61B0_430D_A25B_FAE73321C1DA SELECTIVITY 100,
    ID_ESPECIFICO VARCHAR(255) SELECTIVITY 1,
    ESPECIFICACION VARCHAR(255) NOT NULL SELECTIVITY 13,
    ENORDEN BOOLEAN SELECTIVITY 2
);
-- 140 +/- SELECT COUNT(*) FROM PUBLIC.PRODUCTO;
CREATE CACHED TABLE PUBLIC.COMENTARIO(
    ID BIGINT DEFAULT (NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_FEFDC1A3_E1F6_4354_B4AA_EFD8763DE900) NOT NULL NULL_TO_DEFAULT SEQUENCE PUBLIC.SYSTEM_SEQUENCE_FEFDC1A3_E1F6_4354_B4AA_EFD8763DE900,
    PADRE BIGINT,
    CLIENTE_ID VARCHAR(255),
    PRODUCTO_ID VARCHAR(255),
    COMENTARIO VARCHAR(255)
);
ALTER TABLE PUBLIC.COMENTARIO ADD CONSTRAINT PUBLIC.CONSTRAINT_B PRIMARY KEY(ID);
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.COMENTARIO;
ALTER TABLE PUBLIC.CATEGORIA ADD CONSTRAINT PUBLIC.SET UNIQUE(NOMBRE);
ALTER TABLE PUBLIC.CATEGORIAESPECIFICACIONPROD ADD CONSTRAINT PUBLIC.CONSTRAINT_17 FOREIGN KEY(ESP_NROREF) REFERENCES PUBLIC.ESPECIFICACIONPRODUCTO(NROREFERENCIA) NOCHECK;
ALTER TABLE PUBLIC.COMENTARIO ADD CONSTRAINT PUBLIC.CONSTRAINT_BA FOREIGN KEY(PADRE) REFERENCES PUBLIC.COMENTARIO(ID) NOCHECK;
ALTER TABLE PUBLIC.CATEGORIA ADD CONSTRAINT PUBLIC.CONSTRAINT_36 FOREIGN KEY(PADRE) REFERENCES PUBLIC.CATEGORIA(NOMBRE) NOCHECK;
ALTER TABLE PUBLIC.CLIENTECOMPRAPRODUCTO ADD CONSTRAINT PUBLIC.CONSTRAINT_E7D FOREIGN KEY(ORDEN_ID) REFERENCES PUBLIC.ORDENCOMPRA(NRO_ORDEN) NOCHECK;
ALTER TABLE PUBLIC.PROVEEDOR ADD CONSTRAINT PUBLIC.NICKNAME FOREIGN KEY(NICKNAME) REFERENCES PUBLIC.USUARIO(NICKNAME) NOCHECK;
ALTER TABLE PUBLIC.COMENTARIO ADD CONSTRAINT PUBLIC.CONSTRAINT_BAF7 FOREIGN KEY(PRODUCTO_ID) REFERENCES PUBLIC.ESPECIFICACIONPRODUCTO(NROREFERENCIA) NOCHECK;
ALTER TABLE PUBLIC.CATEGORIAESPECIFICACIONPROD ADD CONSTRAINT PUBLIC.CONSTRAINT_1 FOREIGN KEY(CAT_NAME) REFERENCES PUBLIC.CATEGORIA(NOMBRE) NOCHECK;
ALTER TABLE PUBLIC.ESPECIFICACIONES ADD CONSTRAINT PUBLIC.CONSTRAINT_6E FOREIGN KEY(ESPPRID) REFERENCES PUBLIC.ESPECIFICACIONPRODUCTO(NROREFERENCIA) NOCHECK;
ALTER TABLE PUBLIC.CLIENTECOMPRAPRODUCTO ADD CONSTRAINT PUBLIC.CONSTRAINT_E FOREIGN KEY(CLIENTE_ID) REFERENCES PUBLIC.CLIENTE(NICKNAME) NOCHECK;
ALTER TABLE PUBLIC.CLIENTE ADD CONSTRAINT PUBLIC.CONSTRAINT_5E FOREIGN KEY(NICKNAME) REFERENCES PUBLIC.USUARIO(NICKNAME) NOCHECK;
ALTER TABLE PUBLIC.COMENTARIO ADD CONSTRAINT PUBLIC.CONSTRAINT_BAF FOREIGN KEY(CLIENTE_ID) REFERENCES PUBLIC.CLIENTE(NICKNAME) NOCHECK;
ALTER TABLE PUBLIC.PRODUCTO ADD CONSTRAINT PUBLIC.CONSTRAINT_F FOREIGN KEY(ESPECIFICACION) REFERENCES PUBLIC.ESPECIFICACIONPRODUCTO(NROREFERENCIA) NOCHECK;
ALTER TABLE PUBLIC.CLIENTECOMPRAPRODUCTO ADD CONSTRAINT PUBLIC.CONSTRAINT_E7 FOREIGN KEY(PRODUCTO_ID) REFERENCES PUBLIC.PRODUCTO(ID) NOCHECK;
ALTER TABLE COMENTARIO ADD fecha Date;